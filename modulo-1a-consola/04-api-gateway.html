<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IteraciÃ³n 4: Exponer con API Gateway - Goikode Serverless Secure Course</title>
    <link rel="stylesheet" href="../styles/goikode-docs.css">
</head>
<body>
    <!-- Header with logo and student prefix -->
    <header class="doc-header">
        <div class="doc-header-left">
            <a href="../index.html" class="logo-link">
                <img src="../assets/brand/logo.svg" alt="Goikode" class="doc-logo" onerror="this.src='../assets/brand/logo.png'">
            </a>
            <h1 class="doc-title">IteraciÃ³n 4: Exponer con API Gateway</h1>
        </div>
        <div class="doc-header-right">
            <div class="student-prefix-display">
                <span class="student-prefix-label">Tu prefijo:</span>
                <span id="header-student-prefix">-</span>
            </div>
            <button id="change-prefix-btn">Cambiar Prefijo</button>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Ãndice del Curso</h2>
            <button class="sidebar-toggle" id="sidebar-toggle">âœ•</button>
        </div>
        <div class="sidebar-content" id="sidebar-content">
            <div class="sidebar-loading">Cargando Ã­ndice...</div>
        </div>
    </aside>

    <!-- Toggle button for mobile -->
    <button class="sidebar-open-btn" id="sidebar-open-btn">â˜°</button>

    <!-- Main content container -->
    <div class="doc-container with-sidebar">
        <div class="doc-content">
            <h1 id="iteracion-4-exponer-con-api-gateway">IteraciÃ³n 4: Exponer con API Gateway</h1>
<h2 id="crear-una-api-rest-publica">Crear una API REST PÃºblica</h2>
<hr />
<h2 id="objetivo">ğŸ¯ Objetivo</h2>
<p>Crear una API HTTP en API Gateway y conectarla con la funciÃ³n Lambda para exponer el catÃ¡logo de vinilos vÃ­a HTTP, permitiendo que cualquier cliente (curl, Postman, navegador, app mÃ³vil) pueda consumir la API.</p>
<hr />
<h2 id="conceptos-clave">ğŸ“š Conceptos Clave</h2>
<h3 id="que-es-amazon-api-gateway">Â¿QuÃ© es Amazon API Gateway?</h3>
<p><strong>API Gateway</strong> es un servicio completamente gestionado para crear, publicar, mantener, monitorizar y securizar APIs:</p>
<ul>
<li>âœ… <strong>Serverless</strong>: Sin servidores que aprovisionar</li>
<li>âœ… <strong>Escalado automÃ¡tico</strong>: De 0 a millones de peticiones</li>
<li>âœ… <strong>MÃºltiples integraciones</strong>: Lambda, HTTP endpoints, AWS services</li>
<li>âœ… <strong>Seguridad</strong>: API Keys, IAM, Cognito, Lambda Authorizers</li>
<li>âœ… <strong>Throttling</strong>: Control de rate limiting</li>
<li>âœ… <strong>CORS</strong>: ConfiguraciÃ³n automÃ¡tica</li>
</ul>
<h3 id="http-api-vs-rest-api">HTTP API vs REST API</h3>
<table>
<thead>
<tr>
<th>CaracterÃ­stica</th>
<th>HTTP API</th>
<th>REST API</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Precio</strong></td>
<td>MÃ¡s barato (70% menos)</td>
<td>MÃ¡s caro</td>
</tr>
<tr>
<td><strong>Latencia</strong></td>
<td>Menor (~71ms)</td>
<td>Mayor (~90ms)</td>
</tr>
<tr>
<td><strong>AutorizaciÃ³n</strong></td>
<td>JWT, IAM, Lambda</td>
<td>Todo lo anterior + API Keys</td>
</tr>
<tr>
<td><strong>Request validation</strong></td>
<td>No</td>
<td>SÃ­</td>
</tr>
<tr>
<td><strong>Caching</strong></td>
<td>No</td>
<td>SÃ­</td>
</tr>
<tr>
<td><strong>Caso de uso</strong></td>
<td>APIs modernas, microservicios</td>
<td>APIs complejas, legacy</td>
</tr>
</tbody>
</table>
<p>ğŸ’¡ <strong>Para este curso usaremos HTTP API</strong> (mÃ¡s simple y econÃ³mica).</p>
<hr />
<h2 id="parte-1-crear-http-api">ğŸ› ï¸ Parte 1: Crear HTTP API</h2>
<h3 id="paso-1-navegar-a-api-gateway"><strong>Paso 1: Navegar a API Gateway</strong></h3>
<ol>
<li>En la consola AWS, busca <strong>"API Gateway"</strong></li>
<li>Haz clic en <strong>"API Gateway"</strong> (servicio)</li>
<li>VerÃ¡s dos opciones: <strong>HTTP API</strong> y <strong>REST API</strong></li>
</ol>
<hr />
<h3 id="paso-2-crear-http-api"><strong>Paso 2: Crear HTTP API</strong></h3>
<ol>
<li>En la secciÃ³n <strong>HTTP API</strong>, haz clic en <strong>"Build"</strong></li>
</ol>
<h4 id="step-1-add-integrations"><strong>Step 1: Add integrations</strong></h4>
<p>Esta pantalla te permite configurar la primera integraciÃ³n (Lambda).</p>
<ol>
<li>
<p><strong>Integrations</strong>:<br />
   - Selecciona <strong>"Lambda"</strong> en el dropdown<br />
   - <strong>Lambda function</strong>: Busca y selecciona tu Lambda: <code>{prefijo}-get-vinilos</code><br />
   - <strong>Version</strong>: 2.0 (por defecto)</p>
</li>
<li>
<p><strong>API name</strong>:<br />
   - <strong>API name</strong>: <code>{tu-prefijo}-vinilos-api</code></p>
<ul>
<li>Ejemplo: <code>juan-perez-vinilos-api</code></li>
</ul>
</li>
<li>
<p>Haz clic en <strong>"Next"</strong></p>
</li>
</ol>
<h4 id="step-2-configure-routes"><strong>Step 2: Configure routes</strong></h4>
<p>API Gateway autoconfigura una ruta basÃ¡ndose en tu Lambda.</p>
<ol>
<li>VerÃ¡s una ruta por defecto: <code>ANY /{prefijo}-get-vinilos</code></li>
<li><strong>ModifÃ­cala</strong>:<br />
   - <strong>Method</strong>: Cambia <code>ANY</code> a <code>GET</code> (dropdown)<br />
   - <strong>Resource path</strong>: Cambia a <code>/vinilos</code></li>
</ol>
<p>DeberÃ­a quedar: <code>GET /vinilos</code></p>
<ol start="3">
<li><strong>Integration target</strong>: Debe mostrar tu Lambda</li>
<li>Haz clic en <strong>"Next"</strong></li>
</ol>
<h4 id="step-3-configure-stages"><strong>Step 3: Configure stages</strong></h4>
<p>Un <strong>stage</strong> es un entorno de despliegue (dev, prod, etc.).</p>
<ol>
<li><strong>Stage name</strong>: <code>$default</code> (por defecto, estÃ¡ bien)</li>
<li><strong>Auto-deploy</strong>: âœ… Activado (despliega automÃ¡ticamente cambios)</li>
<li>Haz clic en <strong>"Next"</strong></li>
</ol>
<h4 id="step-4-review-and-create"><strong>Step 4: Review and create</strong></h4>
<ol>
<li>Revisa la configuraciÃ³n</li>
<li>Haz clic en <strong>"Create"</strong></li>
</ol>
<p>â±ï¸ API Gateway tardarÃ¡ unos segundos en crear la API.</p>
<hr />
<h3 id="paso-25-anadir-tag-de-estudiante-importante"><strong>Paso 2.5: AÃ±adir Tag de Estudiante (IMPORTANTE)</strong></h3>
<p>âš ï¸ <strong>IMPORTANTE para seguridad multi-tenant</strong>: Debes aÃ±adir un tag con tu nombre de estudiante.</p>
<ol>
<li>Una vez creada la API, ve a la pestaÃ±a <strong>"Tags"</strong></li>
<li>Haz clic en <strong>"Manage tags"</strong></li>
<li>Haz clic en <strong>"Add new tag"</strong></li>
<li><strong>Key</strong>: <code>Student</code></li>
<li><strong>Value</strong>: <code>{tu-prefijo}</code> (ejemplo: <code>juan-perez</code>)</li>
<li>Haz clic en <strong>"Save"</strong></li>
</ol>
<p>âœ… Este tag te permite gestionar esta API (sin Ã©l, no podrÃ¡s modificarla despuÃ©s).</p>
<hr />
<h3 id="paso-3-obtener-la-url-de-la-api"><strong>Paso 3: Obtener la URL de la API</strong></h3>
<p>Una vez creada:</p>
<ol>
<li>VerÃ¡s un mensaje: <strong>"API successfully created"</strong></li>
<li>En la parte superior, encontrarÃ¡s:<br />
   - <strong>Invoke URL</strong>: <code>https://xxxxxxxxxx.execute-api.eu-west-1.amazonaws.com</code></li>
</ol>
<p><strong>Esta es la URL base de tu API</strong>. ğŸ“‹ <strong>CÃ³piala</strong>.</p>
<hr />
<h2 id="parte-2-probar-la-api">ğŸ§ª Parte 2: Probar la API</h2>
<h3 id="opcion-1-desde-el-navegador"><strong>OpciÃ³n 1: Desde el Navegador</strong></h3>
<ol>
<li>Abre tu navegador</li>
<li>
<p>Pega la URL y aÃ±ade <code>/vinilos</code>:<br />
<code>https://xxxxxxxxxx.execute-api.eu-west-1.amazonaws.com/vinilos</code></p>
</li>
<li>
<p>Pulsa Enter</p>
</li>
</ol>
<p>âœ… DeberÃ­as ver el JSON con los 5 vinilos.</p>
<hr />
<h3 id="opcion-2-con-curl-linea-de-comandos"><strong>OpciÃ³n 2: Con curl (LÃ­nea de Comandos)</strong></h3>
<p>Abre tu terminal (o Cloud9) y ejecuta:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>https://xxxxxxxxxx.execute-api.eu-west-1.amazonaws.com/vinilos
</code></pre></div>

<p><strong>Respuesta esperada</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mensaje&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CatÃ¡logo de vinilos desde DynamoDB&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;vinilos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;titulo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Abbey Road&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;artista&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The Beatles&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;precio&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">25.99</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;aÃ±o&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1969</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;imagen&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://...abbey-road.jpg&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="err">...</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="opcion-3-con-postman"><strong>OpciÃ³n 3: Con Postman</strong></h3>
<ol>
<li>Abre Postman</li>
<li>Crea una nueva request:<br />
   - <strong>Method</strong>: GET<br />
   - <strong>URL</strong>: <code>https://xxxxx.execute-api.eu-west-1.amazonaws.com/vinilos</code></li>
<li>Haz clic en <strong>"Send"</strong></li>
</ol>
<p>âœ… DeberÃ­as ver la respuesta JSON en el body.</p>
<hr />
<h2 id="arquitectura-completa">ğŸ” Arquitectura Completa</h2>
<p>Has construido esta arquitectura serverless:</p>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Cliente     â”‚
â”‚ (curl/browser) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ GET /vinilos
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         API Gateway                      â”‚
â”‚  Invoke URL + /vinilos                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Proxy integration
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Lambda Function                   â”‚
â”‚     {prefijo}-get-vinilos              â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚                               â”‚
     â”‚ Scan                          â”‚ Read URLs
     â†“                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DynamoDB      â”‚        â”‚       S3         â”‚
â”‚ {prefijo}-      â”‚        â”‚  {prefijo}-      â”‚
â”‚ vinilos         â”‚        â”‚  vinilos-        â”‚
â”‚                 â”‚        â”‚  imagenes        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<hr />
<h2 id="que-has-aprendido">ğŸ“ Â¿QuÃ© has Aprendido?</h2>
<table>
<thead>
<tr>
<th>Concepto</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>API Gateway</strong></td>
<td>Servicio para crear y gestionar APIs</td>
</tr>
<tr>
<td><strong>HTTP API</strong></td>
<td>Tipo de API (mÃ¡s simple y barata)</td>
</tr>
<tr>
<td><strong>Route</strong></td>
<td>CombinaciÃ³n de mÃ©todo HTTP + path (GET /vinilos)</td>
</tr>
<tr>
<td><strong>Integration</strong></td>
<td>ConexiÃ³n entre API Gateway y backend (Lambda)</td>
</tr>
<tr>
<td><strong>Stage</strong></td>
<td>Entorno de despliegue (dev, prod)</td>
</tr>
<tr>
<td><strong>Invoke URL</strong></td>
<td>URL pÃºblica de la API</td>
</tr>
<tr>
<td><strong>Proxy Integration</strong></td>
<td>API Gateway pasa la request completa a Lambda</td>
</tr>
<tr>
<td><strong>CORS</strong></td>
<td>Permite peticiones desde navegadores web</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="configurar-cors-opcional-pero-recomendado">ğŸŒ Configurar CORS (Opcional pero Recomendado)</h2>
<p>Si quieres consumir esta API desde un navegador (aplicaciÃ³n Vue, React, etc.), necesitas habilitar <strong>CORS</strong>.</p>
<h3 id="que-es-cors">Â¿QuÃ© es CORS?</h3>
<p><strong>Cross-Origin Resource Sharing</strong> es un mecanismo de seguridad del navegador que bloquea peticiones de un dominio (ej: <code>localhost:3000</code>) a otro dominio (ej: <code>api.amazonaws.com</code>) a menos que el servidor lo permita explÃ­citamente.</p>
<h3 id="configurar-cors">Configurar CORS</h3>
<ol>
<li>Ve a tu API en API Gateway</li>
<li>En el menÃº lateral, haz clic en <strong>"CORS"</strong></li>
<li>Haz clic en <strong>"Configure"</strong></li>
<li><strong>Access-Control-Allow-Origin</strong>: <code>*</code> (permite todos los orÃ­genes)<br />
   - En producciÃ³n, especificarÃ­as tu dominio: <code>https://miapp.com</code></li>
<li><strong>Access-Control-Allow-Methods</strong>: Marca <code>GET, POST, PUT, DELETE, OPTIONS</code></li>
<li><strong>Access-Control-Allow-Headers</strong>: Marca <code>*</code> o especifica <code>Content-Type, Authorization</code></li>
<li>Haz clic en <strong>"Save"</strong></li>
</ol>
<p>âœ… Ahora tu API puede ser consumida desde navegadores web.</p>
<hr />
<h2 id="monitorizar-la-api">ğŸ“Š Monitorizar la API</h2>
<p>API Gateway guarda mÃ©tricas automÃ¡ticamente en CloudWatch.</p>
<h3 id="ver-metricas">Ver MÃ©tricas</h3>
<ol>
<li>Ve a tu API en API Gateway</li>
<li>Haz clic en tu stage (<code>$default</code>)</li>
<li>PestaÃ±a <strong>"Monitoring"</strong></li>
</ol>
<p>VerÃ¡s grÃ¡ficas de:<br />
- <strong>Count</strong>: NÃºmero de peticiones<br />
- <strong>4XXError</strong>: Errores de cliente (404, 400, etc.)<br />
- <strong>5XXError</strong>: Errores de servidor (500, 502, etc.)<br />
- <strong>Latency</strong>: Tiempo de respuesta</p>
<hr />
<h2 id="anadir-una-api-key-avanzado-opcional">ğŸ” AÃ±adir una API Key (Avanzado - Opcional)</h2>
<p>HTTP API no soporta API Keys directamente (solo REST API), pero puedes usar un <strong>Lambda Authorizer</strong> custom o migrar a REST API.</p>
<p>Para este ejemplo, lo dejaremos sin autenticaciÃ³n (API pÃºblica).</p>
<p>En el <strong>MÃ³dulo 2 (Pentesting)</strong> veremos por quÃ© esto es inseguro ğŸ˜ˆ</p>
<hr />
<h2 id="ejercicios-opcional">ğŸ§ª Ejercicios (Opcional)</h2>
<ol>
<li>
<p><strong>Prueba mÃ©todos no permitidos</strong>:<br />
<code>bash
   curl -X POST https://xxx.execute-api.eu-west-1.amazonaws.com/vinilos</code><br />
   Â¿QuÃ© cÃ³digo de estado devuelve?</p>
</li>
<li>
<p><strong>Mide la latencia</strong>:<br />
<code>bash
   curl -w "\nTiempo total: %{time_total}s\n" https://xxx.../vinilos</code></p>
</li>
<li>
<p><strong>Prueba rutas inexistentes</strong>:<br />
<code>bash
   curl https://xxx.../albums</code></p>
</li>
<li>
<p><strong>AÃ±ade una segunda ruta</strong> (nueva Lambda):<br />
   - Crea Lambda <code>{prefijo}-get-artistas</code><br />
   - AÃ±ade ruta <code>GET /artistas</code> en API Gateway</p>
</li>
</ol>
<hr />
<h2 id="troubleshooting">ğŸ› Troubleshooting</h2>
<h3 id="error-403-missing-authentication-token">Error 403: "Missing Authentication Token"</h3>
<p><strong>Causa</strong>: La ruta no existe o estÃ¡ mal escrita.</p>
<p><strong>SoluciÃ³n</strong>:<br />
- Verifica que accedes a <code>/vinilos</code> (no <code>/vinyl</code> o <code>/albums</code>)<br />
- Verifica el mÃ©todo (GET, no POST)</p>
<hr />
<h3 id="error-502-internal-server-error">Error 502: "Internal Server Error"</h3>
<p><strong>Causa</strong>: Lambda devolviÃ³ una respuesta mal formada.</p>
<p><strong>SoluciÃ³n</strong>:<br />
1. Ve a Lambda â†’ Logs (CloudWatch)<br />
2. Busca errores en los logs<br />
3. Verifica que Lambda devuelve <code>statusCode</code> y <code>body</code> (string)</p>
<hr />
<h3 id="error-500-timeout">Error 500: Timeout</h3>
<p><strong>Causa</strong>: Lambda tardÃ³ mÃ¡s de 30 segundos.</p>
<p><strong>SoluciÃ³n</strong>:<br />
- Verifica que DynamoDB responde correctamente<br />
- Revisa los logs de Lambda</p>
<hr />
<h3 id="la-api-no-devuelve-datos-actualizados">La API no devuelve datos actualizados</h3>
<p><strong>Causa</strong>: Lambda estÃ¡ cacheando la respuesta (no deberÃ­a con HTTP API).</p>
<p><strong>SoluciÃ³n</strong>:<br />
- Haz una peticiÃ³n con <code>?timestamp=$(date +%s)</code> para forzar bypass de cachÃ© del navegador<br />
- Verifica en Lambda que lee correctamente de DynamoDB</p>
<hr />
<h3 id="cors-errors-en-navegador">CORS errors en navegador</h3>
<p><strong>Error</strong>: <code>Access to fetch at '...' has been blocked by CORS policy</code></p>
<p><strong>SoluciÃ³n</strong>:<br />
- Sigue los pasos de "Configurar CORS" (arriba)<br />
- Verifica que API Gateway devuelve headers:<br />
<code>Access-Control-Allow-Origin: *
  Access-Control-Allow-Methods: GET, POST, ...</code></p>
<hr />
<h2 id="costos">ğŸ“ˆ Costos</h2>
<p>API Gateway es muy econÃ³mico:</p>
<ul>
<li><strong>Free Tier</strong>: 1 millÃ³n de peticiones/mes gratis (primeros 12 meses)</li>
<li><strong>DespuÃ©s</strong>: $1.00 por millÃ³n de peticiones (HTTP API)</li>
<li><strong>Data transfer</strong>: $0.09 por GB (salida hacia Internet)</li>
</ul>
<p><strong>Ejemplo</strong>: 100,000 peticiones/dÃ­a â‰ˆ 3M/mes = <strong>$2/mes</strong> despuÃ©s del free tier.</p>
<hr />
<h2 id="proximos-pasos">ğŸš€ PrÃ³ximos Pasos</h2>
<h3 id="lo-que-hemos-construido">Lo que hemos construido</h3>
<p>âœ… <strong>API HTTP pÃºblica</strong> que devuelve catÃ¡logo de vinilos<br />
âœ… <strong>Arquitectura serverless</strong> completa (API Gateway + Lambda + DynamoDB + S3)<br />
âœ… <strong>Sin servidores que gestionar</strong> (todo serverless)<br />
âœ… <strong>Escalado automÃ¡tico</strong> (de 0 a millones de peticiones)</p>
<h3 id="lo-que-falta-siguientes-modulos">Lo que falta (siguientes mÃ³dulos)</h3>
<p>âŒ <strong>AutenticaciÃ³n</strong>: Cualquiera puede acceder<br />
âŒ <strong>AutorizaciÃ³n</strong>: No hay control de permisos<br />
âŒ <strong>ValidaciÃ³n de entrada</strong>: No se validan los datos<br />
âŒ <strong>Rate limiting</strong>: Sin protecciÃ³n contra abuso<br />
âŒ <strong>MonitorizaciÃ³n</strong>: Solo logs bÃ¡sicos<br />
âŒ <strong>SecurizaciÃ³n</strong>: Muchas vulnerabilidades</p>
<p>En el <strong>MÃ³dulo 2 (Pentesting)</strong> atacaremos esta API ğŸ”“<br />
En el <strong>MÃ³dulo 3 (SecurizaciÃ³n)</strong> la protegeremos ğŸ”’</p>
<hr />
<h2 id="checklist-de-verificacion-final">âœ… Checklist de VerificaciÃ³n Final</h2>
<p>Antes de pasar a SAM, comprueba que tienes:</p>
<ul>
<li>[ ] HTTP API creada: <code>{prefijo}-vinilos-api</code></li>
<li>[ ] Ruta configurada: <code>GET /vinilos</code></li>
<li>[ ] IntegraciÃ³n con Lambda funcionando</li>
<li>[ ] Invoke URL copiada y guardada</li>
<li>[ ] API responde correctamente desde navegador</li>
<li>[ ] API responde correctamente desde curl</li>
<li>[ ] JSON incluye 5 vinilos con imÃ¡genes</li>
<li>[ ] Tag <code>Student: {prefijo}</code> aÃ±adido a la API</li>
<li>[ ] CORS configurado (si aplica)</li>
<li>[ ] MÃ©tricas visibles en CloudWatch</li>
</ul>
<hr />
<h2 id="enhorabuena">ğŸ‰ Â¡Enhorabuena!</h2>
<p>Has construido tu primera arquitectura serverless completa en AWS:</p>
<div class="highlight"><pre><span></span><code>âœ… Lambda (compute)
âœ… DynamoDB (database)
âœ… S3 (storage)
âœ… API Gateway (API)
âœ… IAM (permissions)
âœ… CloudWatch (logs &amp; monitoring)
</code></pre></div>

<p><strong>PrÃ³ximo</strong>:<br />
- <a href="./ejercicio-opcional-s3-trigger.html">Ejercicio Opcional (Homework): S3 Trigger + Lambda + CSV</a> - Arquitectura event-driven<br />
- <a href="./05-migracion-sam.html">Migrar a SAM (Infrastructure as Code)</a></p>
<hr />
<h2 id="notas-para-el-instructor">ğŸ“ Notas para el Instructor</h2>
<p><strong>Tiempo estimado</strong>: 15 minutos</p>
<p><strong>Puntos clave a enfatizar</strong>:<br />
1. HTTP API vs REST API (precio y simplicidad)<br />
2. Proxy integration (API Gateway pasa todo a Lambda)<br />
3. CORS (problema comÃºn en aplicaciones web)<br />
4. Monitoring bÃ¡sico (CloudWatch)<br />
5. La API estÃ¡ completamente insegura (prefacio al MÃ³dulo 2)</p>
<p><strong>Demo en vivo recomendada</strong>:<br />
- Mostrar peticiÃ³n en navegador<br />
- Mostrar logs en CloudWatch en tiempo real<br />
- Probar con Postman<br />
- Simular error 404 (ruta inexistente)</p>
        </div>
    </div>

    <!-- JavaScript for student prefix management -->
    <script src="../scripts/student-prefix.js"></script>
    <!-- JavaScript for sidebar navigation -->
    <script src="../scripts/sidebar-nav.js"></script>
    <!-- JavaScript for copy code buttons -->
    <script src="../scripts/copy-code.js"></script>
</body>
</html>